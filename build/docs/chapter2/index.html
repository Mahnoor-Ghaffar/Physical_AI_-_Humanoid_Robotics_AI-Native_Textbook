<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-chapter2/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Chapter 2: Nodes, Topics, and Services | Physical AI &amp; Humanoid Robotics Textbook</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="http://localhost:3000/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="http://localhost:3000/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="http://localhost:3000/docs/chapter2/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Chapter 2: Nodes, Topics, and Services | Physical AI &amp; Humanoid Robotics Textbook"><meta data-rh="true" name="description" content="Master the fundamental communication primitives of ROS 2: nodes, topics, and services, and learn how to optimize their behavior with Quality of Service policies."><meta data-rh="true" property="og:description" content="Master the fundamental communication primitives of ROS 2: nodes, topics, and services, and learn how to optimize their behavior with Quality of Service policies."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://localhost:3000/docs/chapter2/"><link data-rh="true" rel="alternate" href="http://localhost:3000/docs/chapter2/" hreflang="en"><link data-rh="true" rel="alternate" href="http://localhost:3000/docs/chapter2/" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Chapter 2: Nodes, Topics, and Services","item":"http://localhost:3000/docs/chapter2/"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Physical AI &amp; Humanoid Robotics Textbook RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Physical AI &amp; Humanoid Robotics Textbook Atom Feed">




<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"><link rel="stylesheet" href="/assets/css/styles.062f6248.css">
<script src="/assets/js/runtime~main.ef3c926b.js" defer="defer"></script>
<script src="/assets/js/main.0dd3b563.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">AI/Spec-Driven Book</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Book</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/chapter1/"><span title="Module 1: The Robotic Nervous System (ROS 2)" class="categoryLinkLabel_W154">Module 1: The Robotic Nervous System (ROS 2)</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/chapter1/"><span title="Chapter 1: Introduction to ROS 2 Middleware" class="linkLabel_WmDU">Chapter 1: Introduction to ROS 2 Middleware</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/chapter2/"><span title="Chapter 2: Nodes, Topics, and Services" class="linkLabel_WmDU">Chapter 2: Nodes, Topics, and Services</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/chapter3/"><span title="Chapter 3: Bridging Python AI Agents with rclpy" class="linkLabel_WmDU">Chapter 3: Bridging Python AI Agents with rclpy</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/chapter4/"><span title="Chapter 4: Modeling Humanoids with URDF" class="linkLabel_WmDU">Chapter 4: Modeling Humanoids with URDF</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/chapter1/getting-started"><span title="Chapter 1" class="categoryLinkLabel_W154">Chapter 1</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/chapter2/core-concepts"><span title="Chapter 2" class="categoryLinkLabel_W154">Chapter 2</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/chapter3/advanced-topics"><span title="Chapter 3" class="categoryLinkLabel_W154">Chapter 3</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/chapter4/the-ai-native-mindset"><span title="Chapter 4" class="categoryLinkLabel_W154">Chapter 4</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Module 1: The Robotic Nervous System (ROS 2)</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Chapter 2: Nodes, Topics, and Services</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Chapter 2: Nodes, Topics, and Services</h1></header><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="chapter-2-nodes-topics-and-services">Chapter 2: Nodes, Topics, and Services<a href="#chapter-2-nodes-topics-and-services" class="hash-link" aria-label="Direct link to Chapter 2: Nodes, Topics, and Services" title="Direct link to Chapter 2: Nodes, Topics, and Services" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="21-objectives">2.1 Objectives<a href="#21-objectives" class="hash-link" aria-label="Direct link to 2.1 Objectives" title="Direct link to 2.1 Objectives" translate="no">​</a></h3>
<p>Upon completing this chapter, you will be able to:</p>
<ul>
<li class="">Create and implement ROS 2 publisher and subscriber nodes in Python.</li>
<li class="">Define and utilize ROS 2 messages, including custom message types.</li>
<li class="">Implement ROS 2 service clients and servers in Python for request/response communication.</li>
<li class="">Apply Quality of Service (QoS) policies to topics and services to optimize communication for various scenarios.</li>
<li class="">Understand and implement ROS 2 lifecycle nodes for predictable node startup, shutdown, and state management.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="22-deep-dive-into-ros-2-nodes">2.2 Deep Dive into ROS 2 Nodes<a href="#22-deep-dive-into-ros-2-nodes" class="hash-link" aria-label="Direct link to 2.2 Deep Dive into ROS 2 Nodes" title="Direct link to 2.2 Deep Dive into ROS 2 Nodes" translate="no">​</a></h3>
<p>In Chapter 1, we introduced nodes as the fundamental computational units of ROS 2. A node is essentially an executable program that performs a specific task, such as reading from a sensor, performing a computation, or sending commands to an actuator. The power of ROS 2 lies in its distributed nature, where many independent nodes can run concurrently, potentially on different machines, and communicate seamlessly. In Python, a ROS 2 node is typically implemented as a class inheriting from <code>rclpy.node.Node</code>, providing access to ROS 2 functionalities like creating publishers, subscribers, service servers, and clients. Each node needs to be initialized with <code>rclpy.init()</code> and kept alive by <code>rclpy.spin()</code>.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> rclpy</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">node </span><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> Node</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">class</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">MyCustomNode</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">Node</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">def</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">__init__</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token builtin" style="color:#e6db74">super</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">__init__</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&#x27;my_custom_node&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&#x27;My custom node has started!&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">def</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">main</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">args</span><span class="token operator" style="color:#66d9ef">=</span><span class="token boolean" style="color:#ae81ff">None</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">init</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">args</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">args</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    node </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> MyCustomNode</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">spin</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">node</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic"># Keeps the node alive and processing callbacks</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    node</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">destroy_node</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">shutdown</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#66d9ef">==</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;__main__&#x27;</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    main</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><br></span></code></pre></div></div>
<ul>
<li class=""><strong>Code Example 2.1</strong>: A minimal ROS 2 Python node.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="23-publishsubscribe-communication-topics">2.3 Publish/Subscribe Communication: Topics<a href="#23-publishsubscribe-communication-topics" class="hash-link" aria-label="Direct link to 2.3 Publish/Subscribe Communication: Topics" title="Direct link to 2.3 Publish/Subscribe Communication: Topics" translate="no">​</a></h3>
<p>Topics are the backbone of ROS 2&#x27;s asynchronous, many-to-many communication. They act as named buses over which nodes can send (publish) and receive (subscribe) messages. This decoupled architecture allows nodes to operate independently without needing direct knowledge of other nodes. Messages are structured data types, defined in <code>.msg</code> files, which <code>ros2</code> tools translate into code for various languages.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="231-publishers">2.3.1 Publishers<a href="#231-publishers" class="hash-link" aria-label="Direct link to 2.3.1 Publishers" title="Direct link to 2.3.1 Publishers" translate="no">​</a></h4>
<p>A publisher node sends messages to a topic at a regular interval or based on an event.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> rclpy</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">node </span><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> Node</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> std_msgs</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">msg </span><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> String </span><span class="token comment" style="color:#8292a2;font-style:italic"># Standard string message type</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">class</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">MinimalPublisher</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">Node</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">def</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">__init__</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token builtin" style="color:#e6db74">super</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">__init__</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&#x27;minimal_publisher&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">publisher_ </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">create_publisher</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;chatter&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic"># Topic: &#x27;chatter&#x27;, QoS depth: 10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">i </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">timer </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">create_timer</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">0.5</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">timer_callback</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic"># Publish every 0.5 seconds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&#x27;Minimal Publisher node running.&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">def</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">timer_callback</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        msg </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> String</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        msg</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">data </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:#a6e22e">f&#x27;Hello from ROS 2: </span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">.</span><span class="token string-interpolation interpolation">i</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">}</span><span class="token string-interpolation string" style="color:#a6e22e">&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">publisher_</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">publish</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">msg</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string-interpolation string" style="color:#a6e22e">f&#x27;Publishing: &quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">{</span><span class="token string-interpolation interpolation">msg</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">.</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">}</span><span class="token string-interpolation string" style="color:#a6e22e">&quot;&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">i </span><span class="token operator" style="color:#66d9ef">+=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">def</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">main</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">args</span><span class="token operator" style="color:#66d9ef">=</span><span class="token boolean" style="color:#ae81ff">None</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">init</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">args</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">args</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    minimal_publisher </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> MinimalPublisher</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">spin</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">minimal_publisher</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    minimal_publisher</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">destroy_node</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">shutdown</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#66d9ef">==</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;__main__&#x27;</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    main</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><br></span></code></pre></div></div>
<ul>
<li class=""><strong>Code Example 2.2</strong>: A Python publisher node sending string messages.</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="232-subscribers">2.3.2 Subscribers<a href="#232-subscribers" class="hash-link" aria-label="Direct link to 2.3.2 Subscribers" title="Direct link to 2.3.2 Subscribers" translate="no">​</a></h4>
<p>A subscriber node listens to a topic and processes incoming messages.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> rclpy</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">node </span><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> Node</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> std_msgs</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">msg </span><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> String</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">class</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">MinimalSubscriber</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">Node</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">def</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">__init__</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token builtin" style="color:#e6db74">super</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">__init__</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&#x27;minimal_subscriber&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">subscription </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">create_subscription</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            String</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token string" style="color:#a6e22e">&#x27;chatter&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">listener_callback</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic"># Topic: &#x27;chatter&#x27;, QoS depth: 10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">subscription </span><span class="token comment" style="color:#8292a2;font-style:italic"># prevent unused variable warning</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&#x27;Minimal Subscriber node running.&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">def</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">listener_callback</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> msg</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string-interpolation string" style="color:#a6e22e">f&#x27;I heard: &quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">{</span><span class="token string-interpolation interpolation">msg</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">.</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">}</span><span class="token string-interpolation string" style="color:#a6e22e">&quot;&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">def</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">main</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">args</span><span class="token operator" style="color:#66d9ef">=</span><span class="token boolean" style="color:#ae81ff">None</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">init</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">args</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">args</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    minimal_subscriber </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> MinimalSubscriber</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">spin</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">minimal_subscriber</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    minimal_subscriber</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">destroy_node</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">shutdown</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#66d9ef">==</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;__main__&#x27;</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    main</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><br></span></code></pre></div></div>
<ul>
<li class=""><strong>Code Example 2.3</strong>: A Python subscriber node receiving string messages.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="24-synchronous-communication-services">2.4 Synchronous Communication: Services<a href="#24-synchronous-communication-services" class="hash-link" aria-label="Direct link to 2.4 Synchronous Communication: Services" title="Direct link to 2.4 Synchronous Communication: Services" translate="no">​</a></h3>
<p>While topics are excellent for streaming data, sometimes a node needs to request a specific computation or action from another node and wait for a direct response. This is where <strong>Services</strong> come in. Services provide a synchronous request/response communication pattern, ideal for functionalities like querying robot state, triggering discrete actions, or performing calculations that return an immediate result.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="241-service-server">2.4.1 Service Server<a href="#241-service-server" class="hash-link" aria-label="Direct link to 2.4.1 Service Server" title="Direct link to 2.4.1 Service Server" translate="no">​</a></h4>
<p>A service server node implements the logic to handle incoming requests and send back a response.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> rclpy</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">node </span><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> Node</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> example_interfaces</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">srv </span><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> AddTwoInts </span><span class="token comment" style="color:#8292a2;font-style:italic"># Assuming this service message is available</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">class</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">MinimalService</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">Node</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">def</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">__init__</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token builtin" style="color:#e6db74">super</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">__init__</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&#x27;minimal_service&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">srv </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">create_service</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">AddTwoInts</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;add_two_ints&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">add_two_ints_callback</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&#x27;Service server for &quot;add_two_ints&quot; started.&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">def</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">add_two_ints_callback</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> request</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> response</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        response</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token builtin" style="color:#e6db74">sum</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> request</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">a </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> request</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">b</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string-interpolation string" style="color:#a6e22e">f&#x27;Incoming request: a=</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">{</span><span class="token string-interpolation interpolation">request</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">.</span><span class="token string-interpolation interpolation">a</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">}</span><span class="token string-interpolation string" style="color:#a6e22e">, b=</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">{</span><span class="token string-interpolation interpolation">request</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">.</span><span class="token string-interpolation interpolation">b</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">}</span><span class="token string-interpolation string" style="color:#a6e22e">. Sending response: </span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">{</span><span class="token string-interpolation interpolation">response</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">.</span><span class="token string-interpolation interpolation builtin" style="color:#e6db74">sum</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">}</span><span class="token string-interpolation string" style="color:#a6e22e">&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> response</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">def</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">main</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">args</span><span class="token operator" style="color:#66d9ef">=</span><span class="token boolean" style="color:#ae81ff">None</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">init</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">args</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">args</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    minimal_service </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> MinimalService</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">spin</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">minimal_service</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    minimal_service</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">destroy_node</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">shutdown</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#66d9ef">==</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;__main__&#x27;</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    main</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><br></span></code></pre></div></div>
<ul>
<li class=""><strong>Code Example 2.4</strong>: A Python service server for adding two integers.</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="242-service-client">2.4.2 Service Client<a href="#242-service-client" class="hash-link" aria-label="Direct link to 2.4.2 Service Client" title="Direct link to 2.4.2 Service Client" translate="no">​</a></h4>
<p>A service client node sends a request to a service server and blocks (or awaits asynchronously) until it receives a response.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> rclpy</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">node </span><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> Node</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> example_interfaces</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">srv </span><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> AddTwoInts</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> sys</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">class</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">MinimalClient</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">Node</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">def</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">__init__</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token builtin" style="color:#e6db74">super</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">__init__</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&#x27;minimal_client&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">cli </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">create_client</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">AddTwoInts</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;add_two_ints&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">while</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">not</span><span class="token plain"> self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">cli</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">wait_for_service</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">timeout_sec</span><span class="token operator" style="color:#66d9ef">=</span><span class="token number" style="color:#ae81ff">1.0</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&#x27;Service not available, waiting...&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">req </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> AddTwoInts</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">Request</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&#x27;Service client ready to send requests.&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">def</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">send_request</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> a</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">req</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">a </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> a</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">req</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">b </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> b</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">future </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">cli</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">call_async</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">req</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string-interpolation string" style="color:#a6e22e">f&#x27;Requesting: a=</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">{</span><span class="token string-interpolation interpolation">a</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">}</span><span class="token string-interpolation string" style="color:#a6e22e">, b=</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">{</span><span class="token string-interpolation interpolation">b</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">}</span><span class="token string-interpolation string" style="color:#a6e22e">&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">future</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">def</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">main</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">args</span><span class="token operator" style="color:#66d9ef">=</span><span class="token boolean" style="color:#ae81ff">None</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">init</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">args</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">args</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    minimal_client </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> MinimalClient</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">len</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">sys</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">argv</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">3</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        minimal_client</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&#x27;Usage: ros2 run &lt;pkg_name&gt; minimal_client &lt;a&gt; &lt;b&gt;&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        minimal_client</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">destroy_node</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">shutdown</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    a </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">int</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">sys</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">argv</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    b </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">int</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">sys</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">argv</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token number" style="color:#ae81ff">2</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    future </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> minimal_client</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">send_request</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">spin_until_future_complete</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">minimal_client</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> future</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">if</span><span class="token plain"> future</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">result</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">is</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">not</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">None</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        minimal_client</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string-interpolation string" style="color:#a6e22e">f&#x27;Result of add_two_ints: </span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">{</span><span class="token string-interpolation interpolation">future</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">.</span><span class="token string-interpolation interpolation">result</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">(</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">)</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">.</span><span class="token string-interpolation interpolation builtin" style="color:#e6db74">sum</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">}</span><span class="token string-interpolation string" style="color:#a6e22e">&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">else</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        minimal_client</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">error</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string-interpolation string" style="color:#a6e22e">f&#x27;Service call failed: </span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">{</span><span class="token string-interpolation interpolation">future</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">.</span><span class="token string-interpolation interpolation">exception</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">(</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">)</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">}</span><span class="token string-interpolation string" style="color:#a6e22e">&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    minimal_client</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">destroy_node</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">shutdown</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#66d9ef">==</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;__main__&#x27;</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    main</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><br></span></code></pre></div></div>
<ul>
<li class=""><strong>Code Example 2.5</strong>: A Python service client calling the <code>add_two_ints</code> service.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="25-quality-of-service-qos-policies">2.5 Quality of Service (QoS) Policies<a href="#25-quality-of-service-qos-policies" class="hash-link" aria-label="Direct link to 2.5 Quality of Service (QoS) Policies" title="Direct link to 2.5 Quality of Service (QoS) Policies" translate="no">​</a></h3>
<p>One of the most powerful features of ROS 2, inherited from DDS, is the ability to configure Quality of Service (QoS) policies for communication. QoS allows developers to specify requirements for reliability, data persistence, and latency for each topic or service, optimizing behavior for different types of data. For instance, critical control commands might demand maximum reliability, while high-bandwidth camera feeds might prioritize speed over guaranteeing every single frame.</p>
<p>Key QoS policies include:</p>
<ul>
<li class=""><strong>Reliability</strong>: <code>Reliable</code> (guaranteed delivery, with retries) vs. <code>Best Effort</code> (data may be lost, higher speed).</li>
<li class=""><strong>Durability</strong>: <code>Transient Local</code> (publishers retain messages for late-joining subscribers) vs. <code>Volatile</code> (no retention).</li>
<li class=""><strong>History</strong>: <code>Keep Last</code> (only store the N most recent messages) vs. <code>Keep All</code> (store all messages up to a limit).</li>
<li class=""><strong>Liveliness</strong>: How ROS 2 detects if a publisher is still active.</li>
</ul>
<p><strong>Practical Considerations for Humanoid Robotics</strong>: When designing communication for humanoid robots, understanding data rates and QoS is crucial. For example, joint state data, which might be published at <strong>~100Hz</strong>, often requires <code>Reliable</code> QoS to ensure precise control. Conversely, camera images from a humanoid&#x27;s &quot;eyes&quot;, which could be streamed at <strong>~30Hz</strong> with potentially large data sizes, might use <code>Best Effort</code> to prioritize real-time visual feedback over perfect frame delivery, especially if occasional frame drops are acceptable.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">qos </span><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> QoSProfile</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> ReliabilityPolicy</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> DurabilityPolicy</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> HistoryPolicy</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic"># Example QoS Profile for reliable control commands</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">qos_reliable_cmd </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> QoSProfile</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    reliability</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">ReliabilityPolicy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">RELIABLE</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    durability</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">DurabilityPolicy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">VOLATILE</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic"># Or TRANSIENT_LOCAL if last command needs to persist</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    history</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">HistoryPolicy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">KEEP_LAST</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    depth</span><span class="token operator" style="color:#66d9ef">=</span><span class="token number" style="color:#ae81ff">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic"># Example QoS Profile for best-effort sensor data (e.g., camera images)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">qos_best_effort_sensor </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> QoSProfile</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    reliability</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">ReliabilityPolicy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">BEST_EFFORT</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    durability</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">DurabilityPolicy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">VOLATILE</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    history</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">HistoryPolicy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">KEEP_LAST</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    depth</span><span class="token operator" style="color:#66d9ef">=</span><span class="token number" style="color:#ae81ff">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic"># Usage when creating a publisher/subscriber:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic"># self.publisher_ = self.create_publisher(YourMsgType, &#x27;your_topic&#x27;, qos_reliable_cmd)</span><br></span></code></pre></div></div>
<ul>
<li class=""><strong>Code Example 2.6</strong>: Defining different QoS profiles in Python.</li>
</ul>
<div class="calloutContainer_QbOl isaacSim_NZHJ"><div class="trackLabel_AGRY">Track A (Isaac Sim)</div><div class="content_gVH3"><p>In Isaac Sim, fine-tuning QoS can help manage network traffic between the simulator and external control nodes, especially when dealing with high-fidelity sensor data or numerous simulated robots.</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="26-lifecycle-nodes-managing-node-states">2.6 Lifecycle Nodes: Managing Node States<a href="#26-lifecycle-nodes-managing-node-states" class="hash-link" aria-label="Direct link to 2.6 Lifecycle Nodes: Managing Node States" title="Direct link to 2.6 Lifecycle Nodes: Managing Node States" translate="no">​</a></h3>
<p>For robust and predictable robotic systems, especially those deployed on physical hardware, nodes need to manage their operational states gracefully. <strong>Lifecycle Nodes</strong> provide a state machine for ROS 2 nodes, allowing them to transition through well-defined states (Unconfigured, Inactive, Active, Shutdown) and execute specific callbacks during these transitions. This enables system designers to orchestrate complex startup sequences, perform checks before activation, and ensure graceful shutdown, which is vital for safety and reliability in humanoid robotics.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="lifecycle-node-states">Lifecycle Node States<a href="#lifecycle-node-states" class="hash-link" aria-label="Direct link to Lifecycle Node States" title="Direct link to Lifecycle Node States" translate="no">​</a></h4>
<ul>
<li class=""><strong>Unconfigured</strong>: The initial state. The node can be configured.</li>
<li class=""><strong>Inactive</strong>: Configured but not processing data. Ready to become active.</li>
<li class=""><strong>Active</strong>: Fully operational, processing data and executing its main logic.</li>
<li class=""><strong>Finalized</strong>: Node has been shut down and cannot be reactivated.</li>
</ul>
<p>Each state transition can trigger specific callbacks (e.g., <code>on_configure</code>, <code>on_activate</code>, <code>on_deactivate</code>, <code>on_cleanup</code>) where you can implement resource allocation, device initialization, or safety checks.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> rclpy</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">node </span><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> Node</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">lifecycle </span><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> Node </span><span class="token keyword" style="color:#66d9ef">as</span><span class="token plain"> LifecycleNode</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> State</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> TransitionCallbackReturn</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> std_msgs</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">msg </span><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> String</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">class</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">MyLifecycleNode</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">LifecycleNode</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">def</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">__init__</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> node_name</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token builtin" style="color:#e6db74">super</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">__init__</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">node_name</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">publisher_ </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">None</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">timer_ </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">None</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string-interpolation string" style="color:#a6e22e">f&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">{</span><span class="token string-interpolation interpolation">node_name</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">}</span><span class="token string-interpolation string" style="color:#a6e22e"> created.&quot;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">def</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">on_configure</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> state</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> State</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> TransitionCallbackReturn</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&quot;on_configure() is called.&quot;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">publisher_ </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">create_publisher</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;lifecycle_topic&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&quot;Publisher created.&quot;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> TransitionCallbackReturn</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">SUCCESS</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">def</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">on_activate</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> state</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> State</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> TransitionCallbackReturn</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&quot;on_activate() is called.&quot;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">timer_ </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">create_timer</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">1.0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">publish_message</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&quot;Timer created and node is active.&quot;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token comment" style="color:#8292a2;font-style:italic"># Call the base class method to change state</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">super</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">on_activate</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">def</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">on_deactivate</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> state</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> State</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> TransitionCallbackReturn</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&quot;on_deactivate() is called.&quot;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">destroy_timer</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">timer_</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&quot;Timer destroyed.&quot;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token comment" style="color:#8292a2;font-style:italic"># Call the base class method to change state</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">super</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">on_deactivate</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">def</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">on_cleanup</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> state</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> State</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> TransitionCallbackReturn</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&quot;on_cleanup() is called.&quot;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">destroy_publisher</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">publisher_</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&quot;Publisher destroyed.&quot;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> TransitionCallbackReturn</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">SUCCESS</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">def</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">on_shutdown</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> state</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> State</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> TransitionCallbackReturn</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&quot;on_shutdown() is called.&quot;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> TransitionCallbackReturn</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">SUCCESS</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">def</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">publish_message</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        msg </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> String</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        msg</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">data </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;Hello from Lifecycle Node!&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">if</span><span class="token plain"> self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">publisher_ </span><span class="token keyword" style="color:#66d9ef">is</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">not</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">None</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">publisher_</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">publish</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">msg</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            self</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string-interpolation string" style="color:#a6e22e">f&#x27;Publishing: &quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">{</span><span class="token string-interpolation interpolation">msg</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">.</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#f8f8f2">}</span><span class="token string-interpolation string" style="color:#a6e22e">&quot;&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">def</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">main</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">args</span><span class="token operator" style="color:#66d9ef">=</span><span class="token boolean" style="color:#ae81ff">None</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">init</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">args</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">args</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    node </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> MyLifecycleNode</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&#x27;my_lifecycle_node&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">spin</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">node</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#8292a2;font-style:italic"># At this point, the node is likely Finalized, but good practice to destroy</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#8292a2;font-style:italic"># node.destroy_node() # This may not be reachable if spin blocks indefinitely</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    rclpy</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">shutdown</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#66d9ef">==</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;__main__&#x27;</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    main</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><br></span></code></pre></div></div>
<ul>
<li class=""><strong>Worked Example 2.1</strong>: Implementing a simple ROS 2 Lifecycle Node.</li>
</ul>
<div class="calloutContainer_QbOl jetsonUnitree_gBDq"><div class="trackLabel_AGRY">Track B (Jetson/Unitree)</div><div class="content_gVH3"><p>For physical humanoid robots like Unitree H1 or those powered by Jetson, lifecycle nodes are essential for safely managing critical components (e.g., motor controllers, high-power sensors).</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="27-error-handling-and-best-practices">2.7 Error Handling and Best Practices<a href="#27-error-handling-and-best-practices" class="hash-link" aria-label="Direct link to 2.7 Error Handling and Best Practices" title="Direct link to 2.7 Error Handling and Best Practices" translate="no">​</a></h3>
<p>Robust robotics applications demand careful attention to error handling. In ROS 2, this involves anticipating failures in communication, sensor readings, or actuator commands. Best practices include:</p>
<ul>
<li class=""><strong>Logging</strong>: Use <code>self.get_logger().info()</code>, <code>warn()</code>, <code>error()</code>, <code>fatal()</code> for informative messages.</li>
<li class=""><strong>Exception Handling</strong>: Wrap potentially failing operations (e.g., service calls, external API interactions) in <code>try-except</code> blocks.</li>
<li class=""><strong>Communication Checks</strong>: Verify that publishers have subscribers (<code>self.count_publishers()</code>) or services are available (<code>wait_for_service()</code>) before attempting to communicate.</li>
<li class=""><strong>Parameter Validation</strong>: Validate node parameters at startup.</li>
<li class=""><strong>Graceful Shutdown</strong>: Implement logic in lifecycle node callbacks (<code>on_deactivate</code>, <code>on_cleanup</code>) to release resources cleanly.</li>
<li class=""><strong>Timeouts</strong>: Implement timeouts for blocking operations like service calls to prevent deadlocks.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="28-summary--key-takeaways">2.8 Summary &amp; Key Takeaways<a href="#28-summary--key-takeaways" class="hash-link" aria-label="Direct link to 2.8 Summary &amp; Key Takeaways" title="Direct link to 2.8 Summary &amp; Key Takeaways" translate="no">​</a></h3>
<p>In this chapter, you&#x27;ve gained a deep understanding of ROS 2&#x27;s core communication primitives. You&#x27;ve learned to build nodes that publish and subscribe to topics for asynchronous data streams, and implemented service clients and servers for synchronous request/response interactions. A crucial aspect covered was Quality of Service (QoS) policies, which empower you to fine-tune communication for the specific needs of robotic applications, from reliable control to best-effort sensor data. Finally, the concept of lifecycle nodes provides a framework for creating more robust and predictable robot behaviors through managed state transitions. These tools form the foundation for building any complex ROS 2 application, especially for the intricate demands of humanoid robotics.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="29-quiz--exercises">2.9 Quiz &amp; Exercises<a href="#29-quiz--exercises" class="hash-link" aria-label="Direct link to 2.9 Quiz &amp; Exercises" title="Direct link to 2.9 Quiz &amp; Exercises" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="multiple-choice-questions">Multiple Choice Questions<a href="#multiple-choice-questions" class="hash-link" aria-label="Direct link to Multiple Choice Questions" title="Direct link to Multiple Choice Questions" translate="no">​</a></h4>
<ol>
<li class="">
<p><strong>Which communication primitive in ROS 2 is best suited for streaming continuous data, such as sensor readings from a camera or IMU?</strong>
a) Services
b) Actions
c) Topics
d) Parameters</p>
</li>
<li class="">
<p><strong>What is the purpose of a ROS 2 Service?</strong>
a) To send periodic updates to multiple listeners.
b) To handle long-running, goal-oriented tasks with feedback.
c) To provide a synchronous request/response mechanism between nodes.
d) To store configuration data for nodes.</p>
</li>
<li class="">
<p><strong>Which QoS policy ensures that messages are guaranteed to be delivered, even if it means retransmissions?</strong>
a) Best Effort
b) Volatile
c) Reliable
d) Keep Last</p>
</li>
<li class="">
<p><strong>In <code>rclpy</code>, which class would your node typically inherit from to implement a ROS 2 node?</strong>
a) <code>rclpy.Publisher</code>
b) <code>rclpy.Subscriber</code>
c) <code>rclpy.node.Node</code>
d) <code>rclpy.qos.QoSProfile</code></p>
</li>
<li class="">
<p><strong>What is the primary benefit of using ROS 2 Lifecycle Nodes?</strong>
a) To enable faster message transmission.
b) To provide a predictable state machine for node management, enhancing robustness.
c) To simplify custom message definition.
d) To automatically re-route messages around network failures.</p>
</li>
</ol>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="open-ended-question">Open-ended Question<a href="#open-ended-question" class="hash-link" aria-label="Direct link to Open-ended Question" title="Direct link to Open-ended Question" translate="no">​</a></h4>
<ol>
<li class="">Describe a scenario in humanoid robotics where you would choose to use a ROS 2 Service over a Topic, and another scenario where a Topic would be more appropriate than a Service. Justify your choices by explaining the fundamental differences in their communication patterns.</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="210-references">2.10 References<a href="#210-references" class="hash-link" aria-label="Direct link to 2.10 References" title="Direct link to 2.10 References" translate="no">​</a></h3>
<ul>
<li class="">ROS 2 Documentation. (n.d.-a). <em>rclpy - ROS 2 Documentation</em>. Retrieved from <a href="https://docs.ros.org/en/humble/Introspection/Tools/Topic-Tools/rclpy.html" target="_blank" rel="noopener noreferrer" class="">https://docs.ros.org/en/humble/Introspection/Tools/Topic-Tools/rclpy.html</a></li>
<li class="">ROS 2 Documentation. (n.d.-b). <em>About Quality of Service Settings</em>. Retrieved from <a href="https://docs.ros.org/en/humble/Concepts/About-Quality-of-Service-Settings.html" target="_blank" rel="noopener noreferrer" class="">https://docs.ros.org/en/humble/Concepts/About-Quality-of-Service-Settings.html</a></li>
<li class="">ROS 2 Documentation. (n.d.-c). <em>About Lifecycle Nodes</em>. Retrieved from <a href="https://docs.ros.org/en/humble/Concepts/About-Lifecycle-Nodes.html" target="_blank" rel="noopener noreferrer" class="">https://docs.ros.org/en/humble/Concepts/About-Lifecycle-Nodes.html</a></li>
<li class="">ROS 2 Documentation. (n.d.-d). <em>Writing a Simple Publisher and Subscriber (Python)</em>. Retrieved from <a href="https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Publisher-And-Subscriber-Py.html" target="_blank" rel="noopener noreferrer" class="">https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Publisher-And-Subscriber-Py.html</a></li>
<li class="">ROS 2 Documentation. (n.d.-e). <em>Writing a Simple Service and Client (Python)</em>. Retrieved from <a href="https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Service-And-Client-Py.html" target="_blank" rel="noopener noreferrer" class="">https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Service-And-Client-Py.html</a></li>
</ul></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/chapter1/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Chapter 1: Introduction to ROS 2 Middleware</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/chapter3/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Chapter 3: Bridging Python AI Agents with rclpy</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#chapter-2-nodes-topics-and-services" class="table-of-contents__link toc-highlight">Chapter 2: Nodes, Topics, and Services</a><ul><li><a href="#21-objectives" class="table-of-contents__link toc-highlight">2.1 Objectives</a></li><li><a href="#22-deep-dive-into-ros-2-nodes" class="table-of-contents__link toc-highlight">2.2 Deep Dive into ROS 2 Nodes</a></li><li><a href="#23-publishsubscribe-communication-topics" class="table-of-contents__link toc-highlight">2.3 Publish/Subscribe Communication: Topics</a></li><li><a href="#24-synchronous-communication-services" class="table-of-contents__link toc-highlight">2.4 Synchronous Communication: Services</a></li><li><a href="#25-quality-of-service-qos-policies" class="table-of-contents__link toc-highlight">2.5 Quality of Service (QoS) Policies</a></li><li><a href="#26-lifecycle-nodes-managing-node-states" class="table-of-contents__link toc-highlight">2.6 Lifecycle Nodes: Managing Node States</a></li><li><a href="#27-error-handling-and-best-practices" class="table-of-contents__link toc-highlight">2.7 Error Handling and Best Practices</a></li><li><a href="#28-summary--key-takeaways" class="table-of-contents__link toc-highlight">2.8 Summary &amp; Key Takeaways</a></li><li><a href="#29-quiz--exercises" class="table-of-contents__link toc-highlight">2.9 Quiz &amp; Exercises</a></li><li><a href="#210-references" class="table-of-contents__link toc-highlight">2.10 References</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Book</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>